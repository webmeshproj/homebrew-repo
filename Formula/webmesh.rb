# typed: false
# frozen_string_literal: true

# This file was generated by GoReleaser. DO NOT EDIT.
class Webmesh < Formula
  desc "WebMesh is a service mesh for the web"
  homepage "https://webmeshproj.github.io"
  version "0.1.6"
  license "Apache 2.0"

  on_macos do
    if Hardware::CPU.intel?
      url "https://github.com/webmeshproj/webmesh/releases/download/v0.1.6/webmesh_Darwin_x86_64.tar.gz"
      sha256 "75af9ac5b3894afccbbdea5f664363dd51cc48569c13fa32670fb2e066a798c2"

      def install
        bin.install "webmesh-node"
        bin.install "wmctl"
        bin.install "webmesh-turn"
        system "#{bin}/wmctl completion bash > #{bash_completion}/wmctl"
        system "#{bin}/wmctl completion zsh > #{zsh_completion}/_wmctl"
        system "#{bin}/wmctl completion fish > #{fish_completion}/wmctl.fish"
        bash_completion.install "#{bash_completion}/wmctl" => "wmctl"
      end
    end
    if Hardware::CPU.arm?
      url "https://github.com/webmeshproj/webmesh/releases/download/v0.1.6/webmesh_Darwin_arm64.tar.gz"
      sha256 "730953dba5c50b81e7893f889cc106cdd43398a5a010edf52d8cc67f791c7fde"

      def install
        bin.install "webmesh-node"
        bin.install "wmctl"
        bin.install "webmesh-turn"
        system "#{bin}/wmctl completion bash > #{bash_completion}/wmctl"
        system "#{bin}/wmctl completion zsh > #{zsh_completion}/_wmctl"
        system "#{bin}/wmctl completion fish > #{fish_completion}/wmctl.fish"
        bash_completion.install "#{bash_completion}/wmctl" => "wmctl"
      end
    end
  end

  on_linux do
    if Hardware::CPU.arm? && !Hardware::CPU.is_64_bit?
      url "https://github.com/webmeshproj/webmesh/releases/download/v0.1.6/webmesh_Linux_armv6.tar.gz"
      sha256 "24e2539727ada6acbdb1ed66f45d4ed26ea26c113a967851f917550fbcfb7b62"

      def install
        bin.install "webmesh-node"
        bin.install "wmctl"
        bin.install "webmesh-turn"
        system "#{bin}/wmctl completion bash > #{bash_completion}/wmctl"
        system "#{bin}/wmctl completion zsh > #{zsh_completion}/_wmctl"
        system "#{bin}/wmctl completion fish > #{fish_completion}/wmctl.fish"
        bash_completion.install "#{bash_completion}/wmctl" => "wmctl"
      end
    end
    if Hardware::CPU.arm? && Hardware::CPU.is_64_bit?
      url "https://github.com/webmeshproj/webmesh/releases/download/v0.1.6/webmesh_Linux_arm64.tar.gz"
      sha256 "664681c363f0053f224cff429167cdbe3c01a34dd81c0c757f50fdab8b3bb8da"

      def install
        bin.install "webmesh-node"
        bin.install "wmctl"
        bin.install "webmesh-turn"
        system "#{bin}/wmctl completion bash > #{bash_completion}/wmctl"
        system "#{bin}/wmctl completion zsh > #{zsh_completion}/_wmctl"
        system "#{bin}/wmctl completion fish > #{fish_completion}/wmctl.fish"
        bash_completion.install "#{bash_completion}/wmctl" => "wmctl"
      end
    end
    if Hardware::CPU.intel?
      url "https://github.com/webmeshproj/webmesh/releases/download/v0.1.6/webmesh_Linux_x86_64.tar.gz"
      sha256 "b49049530d682b985abb8dd9c1558bc4851b54c609766264185c879815d3d0ad"

      def install
        bin.install "webmesh-node"
        bin.install "wmctl"
        bin.install "webmesh-turn"
        system "#{bin}/wmctl completion bash > #{bash_completion}/wmctl"
        system "#{bin}/wmctl completion zsh > #{zsh_completion}/_wmctl"
        system "#{bin}/wmctl completion fish > #{fish_completion}/wmctl.fish"
        bash_completion.install "#{bash_completion}/wmctl" => "wmctl"
      end
    end
  end

  test do
    system "#{bin}/webmesh-node --version"
    system "#{bin}/wmctl --version"
  end
end
